<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>title</title>
    <link rel="shortcut icon" href="{{ url_for('static', filename='images/favicon.ico') }}" type="image/vnd.microsoft.icon">
    <link rel="stylesheet" href="{{ url_for('static', filename='styles/reset.css') }}" type="text/css">
    <link rel="stylesheet" href="{{ url_for('static', filename='styles/main.css') }}" type="text/css">
    <link rel="stylesheet" href="{{ url_for('static', filename='styles/kiosk.css') }}" type="text/css">

    <script src="{{ url_for('static', filename='js/jquery-3.3.1.min.js') }}" type="text/javascript"></script>
    <script src="{{ url_for('static', filename='js/qrcode.js') }}" type="text/javascript"></script>
    <script src="{{ url_for('static', filename='js/nametag.js') }}" type="text/javascript"></script>
  </head>
  <body>
    <div class="header">
      <h1><img src="{{ url_for('static', filename='images/organization_logo.jpg') }}" alt="Code For San Jose" id="organization_logo"></h1>
      <p>Welcome! Please sign in.</p>
    </div>
    <form id="login_form" action="{{ url_for('signin') }}" method="post" autocomplete="off">
      <div style="display: none;">
        <input type="text" id="PreventChromeAutocomplete" 
          name="PreventChromeAutocomplete" autocomplete="address-level4" />
      </div>
      <input type="text" name="nametag_img" hidden>
      <input type="text" name="use_server_img" value="true" hidden>
      <label>
        <span>Name</span>
        <input type="text" name="name" placeholder="your name" required autofocus>
      </label>
      <label>
        <span>Email address</span>
        <input type="email" name="email" placeholder="your email address" required>
      </label>
      {% if preferences.enable_pronouns %}
      <p>Preferred Pronoun:</p>
      <fieldset class="gender_picker">
        <div class="label_input_pair">
          <input type="radio" name="pronoun" id="pronoun_he" value="he/him/his"/>
          <label for="pronoun_he">He/Him/His</label>
        </div>
        <div class="label_input_pair">
          <input type="radio" name="pronoun" id="pronoun_she" value="she/her/hers"/>
          <label for="pronoun_she">She/Her/Hers</label>
        </div>
        <div class="label_input_pair">
          <input type="radio" name="pronoun" id="pronound_they" value="they/them/their"/>
          <label for="pronound_they">They/Them/Their</label>
        </div>
        <div class="label_input_pair">
          <input type="radio" name="pronoun" id="pronoun_ze" value="ze/hir/hirs"/>
          <label for="pronoun_ze">Ze/Hir/Hirs</label>
        </div>
        <div class="label_input_pair">
          <input type="radio" name="pronoun" id="pronoun_decline" value="ze/hir/hirs"/>
          <label for="pronoun_decline">(decline to state)</label>
        </div>
      </fieldset>
      {% endif %}
      <button name="button" type="submit" value="print">Sign in and print nametag</button>
			<button name="button" type="submit" value="noprint">Sign in only</button>
    </form>
    <div class="nametag_preview hidden">
      <h2>Nametag preview:</h2>
      <img id="nametag_preview_surrogate" alt="nametag preview" width="100%"/>
      <img src="{{ url_for('static', filename='images/organization_logo.jpg') }}" alt="" id="organization_logo_src" style="display:none">
      <canvas id="nametag_canvas" width="600" height="337" style="display:none"></canvas>
    </div>
    <script>
    var nametag = new Nametag({
      'canvas_elem': document.getElementById('nametag_canvas'),
      'form_elem': document.getElementById('login_form'),
      'logo_elem': document.getElementById('organization_logo'),
      'line_1_input': document.querySelector('[name="name"]'),
      'line_2_input': document.querySelector('[name="email"]'),
      'text_x_offset_pct': {{ preferences.text_x_offset_pct | tojson | safe }},
      'text_y_offset_pct': {{ preferences.text_y_offset_pct | tojson | safe }},
      'pronoun_elems': document.getElementsByName('pronoun'),
      'enable_pronouns' : {{ preferences.enable_pronouns | tojson | safe }},
      'img_preview_elem' : document.getElementById('nametag_preview_surrogate'),
      'logo_elem': document.getElementById('organization_logo_src'),
      'img_form_elem': document.querySelector('[name="nametag_img"]'),
      'logo_scale' : {{ preferences.logo_scale | tojson | safe}},
      'qr_max_width_pct' : {{ preferences.qr_max_width_pct | tojson | safe }}
    })
    nametag.set_logo_pos({{ preferences.logo_x_offset_pct }}, {{ preferences.logo_y_offset_pct }})
    nametag.set_qr_x_pos({{ preferences.qr_x_offset_pct }})
    nametag.set_qr_y_pos({{ preferences.qr_y_offset_pct }})
    </script>
  </body>
</html>
